# Domain Randomization Configuration for Sim-to-Real Transfer

randomization:
  enabled: true
  seed: null  # Set for reproducibility

physics:
  # Mass randomization
  mass:
    enabled: true
    distribution: uniform
    range: [0.8, 1.2]  # Multiplier of nominal mass
    
  # Inertia randomization
  inertia:
    enabled: true
    distribution: uniform
    range: [0.8, 1.2]
    
  # Gravity randomization
  gravity:
    enabled: true
    distribution: uniform
    range: [0.95, 1.05]  # Earth gravity multiplier
    
  # Drag coefficient
  drag:
    enabled: true
    distribution: uniform
    range: [0.9, 1.1]

disturbances:
  # Motor noise
  motor_noise:
    enabled: true
    distribution: normal
    std: 0.05  # Percentage of commanded value
    
  # Wind disturbance
  wind:
    enabled: true
    type: variable  # 'constant', 'variable', 'gust'
    max_force: 0.1  # Newtons
    gust_probability: 0.1  # Per timestep
    gust_duration: 0.5  # seconds
    direction_change_freq: 2.0  # seconds
    
  # Turbulence
  turbulence:
    enabled: false
    intensity: 0.05

delays:
  # Action delay (controller to motors)
  action_delay:
    enabled: true
    distribution: uniform
    range: [0.0, 0.05]  # seconds
    
  # Observation delay (sensors to controller)
  observation_delay:
    enabled: true
    distribution: uniform
    range: [0.0, 0.02]  # seconds

sensor_noise:
  # Position sensor (GPS/Motion Capture)
  position:
    enabled: true
    distribution: normal
    std: 0.01  # meters
    bias_range: [-0.005, 0.005]
    
  # Velocity sensor
  velocity:
    enabled: true
    distribution: normal
    std: 0.02  # m/s
    bias_range: [-0.01, 0.01]
    
  # Orientation sensor (IMU)
  orientation:
    enabled: true
    distribution: normal
    std: 0.01  # radians
    bias_range: [-0.005, 0.005]
    
  # Angular velocity sensor (Gyroscope)
  angular_velocity:
    enabled: true
    distribution: normal
    std: 0.05  # rad/s
    bias_range: [-0.02, 0.02]
    
  # Accelerometer
  acceleration:
    enabled: true
    distribution: normal
    std: 0.1  # m/s^2
    bias_range: [-0.05, 0.05]

initial_conditions:
  # Starting position randomization
  position:
    enabled: true
    distribution: uniform
    range_x: [-0.1, 0.1]
    range_y: [-0.1, 0.1]
    range_z: [0.9, 1.1]
    
  # Starting orientation randomization
  orientation:
    enabled: true
    distribution: uniform
    range_roll: [-0.1, 0.1]  # radians
    range_pitch: [-0.1, 0.1]
    range_yaw: [-3.14, 3.14]
    
  # Starting velocity randomization
  velocity:
    enabled: false
    distribution: uniform
    range: [-0.05, 0.05]  # m/s per axis

environment:
  # Lighting conditions (for vision-based controllers)
  lighting:
    enabled: false
    brightness_range: [0.7, 1.3]
    
  # Ground texture randomization
  ground_texture:
    enabled: false
    textures:
      - concrete
      - grass
      - dirt
      - tiles

# Curriculum learning schedule
curriculum:
  enabled: true
  
  # Gradually increase randomization
  stages:
    - name: easy
      duration: 100000  # timesteps
      randomization_scale: 0.3
      
    - name: medium
      duration: 200000
      randomization_scale: 0.6
      
    - name: hard
      duration: 200000
      randomization_scale: 1.0

# Real-world calibration
real_world:
  # Measured values from real Tello drone
  nominal_mass: 0.087  # kg
  nominal_inertia: [0.000082, 0.000082, 0.000149]  # kg*m^2
  motor_time_constant: 0.05  # seconds
  max_thrust: 2.5  # Newtons
  
  # Sensor specifications
  position_sensor_accuracy: 0.02  # meters (optical flow)
  orientation_sensor_accuracy: 0.02  # radians (IMU)
  update_rate: 30  # Hz
